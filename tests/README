This directory contains a test harness and the beginnings of what is
intended to become the primary OpenAFS test suite.  The tests in this
directory are run when "make check" is run at the top level of the OpenAFS
tree.

runtests is the test harness, and TESTS is the list of tests that it
will run.  If you add a new test, add it to TESTS as well.  All tests must
be executables (possibly shell scripts or Perl scripts) that end in either
".t" or "-t", but should be listed in TESTS without that suffix.

Tests should be organized into subdirectories, and where it makes sense to
do so, those subdirectories should match the subdirectory names under src
in the AFS source tree.  In other words, tests for src/util/* should go in
a directory named util, tests for the libkopenafs library should go in a
directory named kopenafs, and so forth.  To integrate with the build
system, each subdirectory will need to have its own Makefile.in and be
added to the list of generated Makefiles in configure.in at the top
level.   The Makefile.in in this directory will also need to be modified
to recurse into any new directories.  See util/Makefile.in for an example
of how to write a Makefile.in for a new test directory.

The files comprising the test harness are sourced from the C TAP Harness
distribution using the src/external mechanism. The upstream site for that
distribution is at:

    http://www.eyrie.org/~eagle/software/c-tap-harness/

but feel free to propose modifications directly through OpenAFS Gerrit.
Russ Allbery will take care of merging modifications upstream.  However,
OpenAFS-specific modifications should not be made to those files.  To add
additional OpenAFS-specific code to the TAP library, add additional *.c
and *.h (or *.sh) files to the tests/tap directory rather than modifying files
in src/external.

More information can be found in the HOWTO contained in
src/external/c-tap-harness/HOWTO

