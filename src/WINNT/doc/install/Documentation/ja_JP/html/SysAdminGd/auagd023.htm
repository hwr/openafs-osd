<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3//EN">
<HTML><HEAD>
<TITLE>管理の手引き</TITLE>
<!-- Begin Header Records  ========================================== -->
<!-- E:\IDWB\TEMP\idwt2118\AUAGD000.SCR converted by idb2h R4.2 (359) -->
<!-- ID Workbench Version (OS2) on 24 Dec 1999 at 12:07:32            -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Shift_JIS">
<META HTTP-EQUIV="updated" CONTENT="Fri, 24 Dec 1999 12:07:30">
<META HTTP-EQUIV="review" CONTENT="Sun, 24 Dec 2000 12:07:30">
<META HTTP-EQUIV="expires" CONTENT="Mon, 24 Dec 2001 12:07:30">
</HEAD><BODY>
<!-- (C) IBM Corporation 2000. All Rights Reserved    -->
<BODY bgcolor="ffffff">
<!-- End Header Records  ============================================ -->
<A NAME="Top_Of_Page"></A>
<H1>管理の手引き</H1>
<HR><H1><A NAME="HDRCOMMANDS" HREF="auagd002.htm#ToC_689">付録 B. AFS コマンドの使用</A></H1>
<P>このセクションでは、AFS コマンドのコンポーネントと、省略形を使ってより効果的にコマンドを入力する方法について説明します。以下のセクションがあります。
<DL>
<DD><P><A HREF="#HDRWQ839">AFS コマンドの構文</A>
<DD><P><A HREF="#HDRWQ840">AFS コマンドの入力規則</A>
<DD><P><A HREF="#HDRWQ841">省略形と別名を使用するための規則</A>
<DD><P><A HREF="#HDRWQ842">AFS コマンドのオンライン・ヘルプの表示</A>
</DL>
<HR><H2><A NAME="HDRWQ839" HREF="auagd002.htm#ToC_690">AFS コマンドの構文</A></H2>
<P>組に属している AFS コマンドの構造は、以下のとおりです。
<PRE>   <B>command_suite operation_code</B> <B>-switch</B> &lt;<VAR>value</VAR>><SUP>[+]</SUP>  [<B>-flag</B>]

</PRE>
<P><H3><A NAME="Header_691" HREF="auagd002.htm#ToC_691">コマンド名</A></H3>
<P>全体として、<B>command_suite</B> と
<B>operation_code</B> で、
<I>コマンド名</I> を構成します。
<P><B>command_suite</B> は、このコマンドが属する、関連したコマンドのグループを指定し、このコマンドを実行するコマンド・インタープリターまたはサーバー・プロセスを示します。AFS には、<B>bos</B>、<B>fs</B>、
<B>kas</B>、<B>package</B>、
<B>pts</B>、<B>scout</B>、
<B>uss</B> および <B>vos</B> を組み込む、いくつかのコマンドの組があります。これらの組の中には、発行者がこのコマンド名の <B>command_suite</B> の部分を省略する対話モードを持つものがあります。
<P><B>operation_code</B> は、実行するアクションを、コマンド・インタープリターおよびサーバー・プロセスに知らせます。ほとんどのコマンドの組には、複数の演算子が組み込まれます。<I>AFS Administration Reference</I> では、各演算子を詳細に説明し、
<I>AFS 管理の手引き</I> では、その演算子を実行管理用タスクのコンテキストで使用する方法を説明します。
<P>いくつかの AFS コマンドは組に属さないため、その名前に <B>command_suite</B> の部分がありません。それ以外の点では、それらのコマンドの構造は、組に属するコマンドに類似しています。
<P><H3><A NAME="Header_692" HREF="auagd002.htm#ToC_692">オプション</A></H3>
<P><I>option</I> という用語は、以下に説明する引き数およびフラグの両方を表します。
<P><H3><A NAME="Header_693" HREF="auagd002.htm#ToC_693">引き数</A></H3>
<P>コマンド名の後に 1 つ以上の引き数を指定することができます。引き数は、コマンドの実行中にそのコマンドが作用するエンティティーを指定します (たとえば、どのサーバー・マシン、サーバー・プロセス、あるいはファイルに作用するか)。潜在的なエラーを最小限にするために、コマンドの定義で規定される順序で、コマンドの引き数を提供しなければなりません。
<P>各引き数には 2 つの部分があり、これらの部分は指定された順に出現します。
<UL>
<LI><I>スイッチ</I> は引き数のタイプを指定し、ハイフン (<B>-</B>) の後に置かれます。たとえば、スイッチ <B>-server</B> は、通常、引き数がサーバー・マシンを指定することを示しています。スイッチは、<A HREF="#HDRNOSWITCH">スイッチを省略するための条件</A> で概説されている規則に従って、省略可能な場合が多くあります。
</LI><LI><I>値</I> は、前述のスイッチで指定されたタイプの特定のエンティティーを指定します。たとえば、<B>-server</B> スイッチに対する適切な値は、<B>fs3.example.com</B> のようなファイル・サーバー・マシンの名前です。スイッチとは異なり (スイッチには必要な形式がある)、値は、発行者が完成したい内容によって異なります。値は、コマンドの説明とオンライン・ヘルプの中で、不等号括弧 (<B>&lt; ></B>) で囲まれて表示され、そのインスタンスはユーザー提供の可変情報であることを示します。
</LI></UL>
<P>一部の引き数は複数の値を受け取ります。コマンド説明とオンライン・ヘルプでは、その引き数の後ろに正符号 ( <B>+</B> ) を付けて示されています。あるコマンドの引き数のうち複数の値を取る引き数の数、および他の引き数との関連におけるそれらの引き数の順序によって、スイッチの省略が受け入れられるかどうかが決まります。<A HREF="#HDRNOSWITCH">スイッチを省略するための条件</A>を参照してください。
<P>コマンドの中には、必須の引き数だけでなく、任意選択の引き数をもつものがあります。コマンドの説明およびオンライン・ヘルプでは、任意選択の引き数を大括弧 ([ ]) で示しています。
<P><H3><A NAME="Header_694" HREF="auagd002.htm#ToC_694">フラグ</A></H3>
<P>コマンドの中には 1 つ以上のフラグを持つものがあります。フラグはコマンド・インタープリターおよびサーバー・プロセスがそのコマンドを実行する仕方、または作成する出力の種類を指定します。フラグは、スイッチのようにハイフンの後に続きますが、インスタンスは取りません。コマンドの説明とオンライン・ヘルプでは、一般にコマンドの引き数の後にそのコマンドのフラグがリストされていますが、フラグに対してはあらかじめ決められた順序というものはありません。コマンドのフラグは、引き数を構成している部分と部分の間を除く、演算子の後のコマンド行の任意の位置に置くことができます。フラグは、いつも任意選択です。
<P><H3><A NAME="HDRCOMMAND-EX" HREF="auagd002.htm#ToC_695">コマンドの例</A></H3>
<P>次の例は、AFS コマンド組に属するコマンドのさまざまな部分を示しています。
<PRE>   % <B> bos getdate -server fs1.example.com -file ptserver kaserver</B>

</PRE>
<P>ここで、
<UL>
<LI><B>bos</B> はコマンドの組です。BOS サーバーがこの組のコマンドのほとんどを実行します。
</LI><LI><B>getdate</B> は、演算子です。この演算子は、指定されたサーバー・マシン上の BOS サーバー (この場合は <B>fs1.example.com</B>) に対して、ローカルの <B>/usr/afs/bin</B> ディレクトリーにあるバイナリー・ファイルの変更日を報告するように指示します。
</LI><LI><B>-server fs1.example.com</B> は、1 つの引き数で、スイッチとして <B>-server</B> を、値として <B>fs1.example.com</B> をもっています。この引き数は、バイナリーの日付を収集して報告する BOS サーバーが存在するサーバー・マシンを指定します。
</LI><LI><B>-file ptserver kaserver</B> は、複数の値を受け入れる引き数です。スイッチは <B>-file</B>で、値は <B>ptserver</B> および <B>kaserver</B> です。この引き数は、ファイル <B>/usr/afs/bin/kaserver</B> と
<B>/usr/afs/bin/ptserver</B> での日付の変更を報告するように、
BOS サーバーに指示します。
</LI></UL>
<P><H3><A NAME="HDRWQ840" HREF="auagd002.htm#ToC_696">AFS コマンドの入力規則</A></H3>
<P>各 AFS コマンドは 1 行で入力します (コマンドの終わりのみで <B>&lt;リターン&gt;</B> を押します)。本書のコマンドの中には、複数行にわたって切れて表示されるものがありますが、それは、印刷上の都合によるものです。
<P>コマンド行の各要素を隣り合う要素から分離するには、スペースを使用します。スペース (コンマではありません) は、引き数の複数の値も分離します。
<P>多くの場合、コマンドの発行者は、次の方法のどちらか1 つあるいは両方を使用すれば、必要な入力量を減らすことができます。
<UL>
<LI>スイッチを省略する
</LI><LI>演算子、スイッチ (組み込まれているなら)、およびいくつかのタイプの値の受け入れ済み省略形を使用する。
</LI></UL>
<P>以下の機能グループでは、コマンド行のパーツの省略または短縮の条件について説明します。コマンドのスイッチをすべて指定し、省略形なしで、コマンドを完全に入力することは常に可能です。
<P><H4><A NAME="HDRNOSWITCH">スイッチを省略するための条件</A></H4>
<P>引き数のスイッチ部分を入力することはいつも受け入れ可能ですが、多くの場合、その必要がありません。特に、以下の条件を満たす場合には、スイッチを省略することができます。
<UL>
<LI>コマンドの必須の引き数がすべて、構文ステートメントであらかじめ規定されている順序で出現する場合。
</LI><LI>引き数にスイッチが全く指定されていない場合
</LI><LI>各引き数に値が 1 つしかない場合 (ただし、次のパラグラフで説明しているように重要な例外があるので注意してください)
</LI></UL>
<P>スイッチの省略が可能なのは、コマンドの各引き数には、あらかじめ規定された順序が存在するという理由だけからです。発行者がスイッチを組み込まない場合には、コマンド・インタープリターはスイッチの代わりに引き数の順序をあてにします。すなわち、コマンド・インタープリターは演算子の後の最初の要素がそのコマンドの最初の引き数で、その次の要素がコマンドの 2 番目の引き数である、というように想定します。重要な例外は、コマンドの最後の必須の引き数が複数の値を受け入れる場合です。このような場合には、コマンド・インタープリターは、発行者が、最後の引き数を介して、各引き数に 1 つの値を正しく提供したと想定します。その結果、最後にある任意の追加の値は、最後の引き数に属する値になります。
<P>以下のリストは、逆の観点からスイッチの省略の規則を説明したものです。すなわち、以下の条件のどれかが適用される場合には、引き数のスイッチを提供しなければなりません。
<UL>
<LI>コマンドの引き数が規定の順序で出現しない
</LI><LI>オプションの引き数は省略されているが、その次のオプションの引き数は提供されている
</LI><LI>1 つ前の引き数にスイッチが指定されている
</LI><LI>1 つ前の引き数に複数の値が提供されている (もちろんこの引き数は複数の値を取らなければならない)。現行の引き数にスイッチがない場合、コマンド・インタープリターは、現行の引き数をその 1 つ前の引き数のもう 1 つの値と見なします。
</LI></UL>
<P><H4><A NAME="Header_698">スイッチ省略の例</A></H4>
<P><A HREF="#HDRCOMMAND-EX">コマンドの例</A> にある例のコマンドについて、もう一度考えてみます。
<PRE>   % <B> bos getdate -server fs1.example.com -file ptserver kaserver</B>

</PRE>
<P>このコマンドは、サーバー・マシンの名前 (<B>-server</B> スイッチで識別される) とバイナリー・ファイルの名前 (<B>-file</B> スイッチで識別される) という 2 つの必須の引き数を持ちます。2 番目の引き数は、複数の値を受け入れます。
3 つの条件すべてに適合していることにより、発行者は次のようにスイッチを省略することができます。
<PRE>   % <B>bos getdate fs1.example.com ptserver kaserver</B>

</PRE>
<P>スイッチがないので、<B>bos</B> コマンド・インタープリターは、引き数の順序をあてにします。このコマンド・インタープリターは、演算子に続く最初の要素 <B>fs1.example.com</B> がサーバー・マシンの名前で、次の引き数 <B>ptserver</B> はバイナリー・ファイルの名前であると想定します。次に、このコマンドの 2 番目の (かつ最後の) 引き数は、複数の値を受け入れるので、このコマンド・インタープリターは、<B>kaserver</B> はその引き数の追加の値である、と正しく解釈します。
<P>一方、次の例は受け入れられません。それは、<A HREF="#HDRNOSWITCH">スイッチを省略するための条件</A> の最初の 2 つの条件に違反しているからです。1 つの引き数に値が 1 つしか指定されていませんが、引き数が規定の順序で出現していません。さらに、1 つの引き数にスイッチが提供されていますがもう 1 つの引き数には提供されていません。
<PRE>   % <B>bos getdate ptserver -server fs1.example.com</B>

</PRE>
<P><H3><A NAME="HDRWQ841" HREF="auagd002.htm#ToC_699">省略形と別名を使用するための規則</A></H3>
<P>このセクションでは、演算子、オプション名、サーバー・マシン名、区画名、およびセル名の省略方法について説明します。これら以外の値を省略することはできません。
<P><H4><A NAME="Header_700">演算子の省略</A></H4>
<P>同じ組のほかの演算子とまだ区別できる最短の形式に、演算子を省略することができます。
<P>たとえば、<B>bos install</B> を <B>bos i</B> に短縮することは受け入れ可能です。それは、<B>bos</B> コマンド組には、文字 <B>i</B> で始まる演算子が他にないからです。それと対照的に、文字 <B>s</B> で始まる <B>bos</B> 演算子は、以下のように複数個あります。したがって、明白にするためには、もっと長くする必要があります。
<DL>
<DD><P><B>bos sa</B> は <B>bos salvage</B> を表す
<DD><P><B>bos seta</B> は <B>bos setauth</B> を表す
<DD><P><B>bos setc</B> は <B>bos setcellname</B> を表す
<DD><P><B>bos setr</B> は <B>bos setrestart</B> を表す
<DD><P><B>bos sh</B> は <B>bos shutdown</B> を表す
<DD><P><B>bos start</B> は <B>bos start</B> を表す
<DD><P><B>bos startu</B> は <B>bos startup</B> を表す
<DD><P><B>bos stat</B> は <B>bos status</B> を表す
<DD><P><B>bos sto</B> は <B>bos stop</B> を表す
</DL>
<P>省略形に加えて、いくつかの演算子には、演算子を最短の明白な形式に省略することによってできる短い形式の<I>別名</I>があります。たとえば、<B>fs setacl</B> コマンドの別名は、
<B>fs sa</B> です。それに対し、最短の明白な省略形は <B>fs seta</B> です。
<P>演算子に別名があるのには、以下のような通例の理由が 2 つあります。
<UL>
<LI>コマンドは頻繁に発行されるため、省略形より短い形式の方が便利である。
<B>fs setacl</B> コマンドがその例です。
</LI><LI>コマンドの名前が変わったけれども、
AFS の以前のバージョンのユーザーが前の名前を知っているため。たとえば、<B>bos listhosts</B>
には、前の名前である <B>bos getcell</B> の別名があります。別名を最短のあいまいでない形式に省略することは受け入れ可能です (たとえば、<B>bos getcell</B> を <B>bos getc</B> に省略する)。
</LI></UL>
<P>たとえ、演算子に別名があっても、最短の明白な形式を使用することができます。したがって、
<B>fs setacl</B> コマンドには、3 つの受け入れ可能な形式があります。<B>fs setacl</B> (完全形式)、<B>fs seta</B> (最短の省略形)、および <B>fs sa</B> (別名)です。
<P><H4><A NAME="Header_701">スイッチとフラグの省略</A></H4>
<P>スイッチあるいはフラグを、それと同じ演算子の他のスイッチとフラグから区別する最短形式に短縮することができます。
<A HREF="#HDRNOSWITCH">スイッチを省略するための条件</A> でリストされている条件に従えば、スイッチを完全に省略してしまうことができる場合も多くあります。
<P><H4><A NAME="HDRFMSABBREV">サーバー・マシン名の省略</A></H4>
<P>AFS サーバー・マシンは、完全に修飾されたインターネット形式のホスト名を持たなければなりません (たとえば、<B>fs1.example.com</B>)。ただし、コマンド行に常にフルネームを入力する必要があるわけではありません。
AFS コマンドは、明白に短縮した形式を受け入れますが、コマンドが発行されたとき、短縮名を完全に修飾された名前に解釈するのは、セルの名前サービス (ドメイン・ネーム・サービスなど) またはローカル・ホスト・テーブルによって異なります。
<P>大部分のコマンドは、小数点付き 10 進数形式のマシンの IP アドレスも ID として受け入れます。
<P><H4><A NAME="HDRPARTABBREV">区分名の省略</A></H4>
<P>AFS ボリュームを収容する区分には、<B>/vicep</B><VAR>x</VAR> または <B>/vicep</B><VAR>xx</VAR> の形式の名前がなければなりません。ただし、変数の最後の部分はアルファベットの小文字です。通例、ファイル・サーバー・マシン上に作成された最初のサーバー区画は <B>/vicepa</B>、2 番目の区画は <B>/vicepb</B>、というように呼ばれます。
<I>AFS インストールの手引き</I> では、AFS ボリュームをそのマシン上に保管するための準備に、ファイル・サーバー・マシンの区分を構成し命名する方法について説明します。
<P>AFS コマンドを発行するときには、以下の形式のいずれかを使用して、区分名を省略することができます。
<PRE>   <B>/vicepa</B>     =     <B>vicepa</B>      =      <B>a</B>      =      <B>0</B>
   <B>/vicepb</B>     =     <B>vicepb</B>      =      <B>b</B>      =      <B>1</B>

</PRE>
<P><B>/vicepz</B> (インデックスは 25) の後に
<PRE>   <B>/vicepaa</B>    =     <B>vicepaa</B>     =      <B>aa</B>     =      <B>26</B>
   <B>/vicepab</B>    =     <B>vicepab</B>     =      <B>ab</B>     =      <B>27</B>

</PRE>
<P>同様に
<PRE>   <B>/vicepiv</B>    =     <B>vicepiv</B>     =      <B>iv</B>     =      <B>255</B>

</PRE>
<P><H4><A NAME="HDRCELLABBREV">セル名の省略</A></H4>
<P>セルのフルネームは通常そのインターネット・ドメイン名 (たとえば、Example Organization の場合は <B>example.org</B>、あるいは Example Corporation の場合であれば <B>example.com</B>) に一致します。一部の AFS コマンドは、通常ローカルの <B>/usr/vice/etc/CellServDB ファイル</B>を基準としたあいまいでない短縮形式を受け入れますが、対応するドメイン名をどのように解決するかは、ローカル・ネーム・サービスの性能によって異なる場合があります。
<P><H3><A NAME="HDRWQ842" HREF="auagd002.htm#ToC_705">AFS コマンドのオンライン・ヘルプの表示</A></H3>
<P>組に属する AFS コマンドのオンライン・ヘルプを表示するには、<B>help</B> および <B>apropos</B> 演算子を使用します。
<B>-help</B> フラグも、ほとんどすべての AFS コマンドで使用することができます。
<P>1 つのコマンドのオンライン・ヘルプ項目は、以下のように 2 行または 3 行で構成されます。
<UL>
<LI>最初の行でコマンドを挙げて、そのコマンドの動作を簡単に説明しています。
</LI><LI>コマンドに別名がある場合には、次の行に表示されます。
</LI><LI>最終行は文字列 <TT>Usage:</TT> で始まり、コマンドのオプションを規定の順序でリストしています。オンライン・ヘルプの項目は、このドキュメンテーションと同じ活字記号 (大括弧など) を使用しています。
</LI></UL>
<P>演算子が指定されていない場合は、<B>help</B> 演算子は、その組の演算子ごとに最初の行 (簡単な説明) を表示します。
<PRE>
   % <VAR>command_suite</VAR>  <B>help</B>

</PRE>
<P>発行者が 1 つ以上の演算子を指定している場合は、<B>help</B> 演算子は、各コマンドの完全なオンライン項目 (簡単な説明、あるいは別名がある場合にはその別名、および構文) を表示します。
<PRE>
   % <VAR>command_suite</VAR> <B>help</B> <VAR>operation_code</VAR><SUP>+</SUP>

</PRE>
<P><B>-help</B> フラグは、コマンドの構文を表示しますが、簡単な説明あるいは別名は表示しません。
<PRE>   % <VAR>command_name</VAR> <B>-help</B>

</PRE>
<P><B>apropos</B> 演算子は、指定されたキーワードを含む演算子または簡単な説明を持つ、ある組に属する任意のコマンドに関する簡単な説明を表示します。
<PRE>   % <VAR>command_suite</VAR> <B>apropos</B> <VAR>"&lt;help
string>"</VAR>

</PRE>
<P>以下の例で示したコマンドは、<B>fs setacl</B> コマンドの完全なオンライン・ヘルプ項目を表示します。
<PRE>
   % <B>fs help setacl </B>
   fs setacl: set access control list
   aliases: sa
   Usage: fs setacl -dir &lt;directory>+ -acl &lt;access list entries>+
   [-clear] [-negative] [-id] [-if] [-help]

</PRE>
<P>構文ステートメントだけを表示するには、<B>-help</B> フラグを使用します。
<PRE>   % <B>fs setacl -help</B>
   Usage: fs setacl -dir &lt;directory>+ -acl &lt;access list entries>+
   [-clear] [-negative] [-id] [-if] [-help]

</PRE>
<P>以下の例では、あるユーザーが自分のホーム・ボリュームの割り当て量を表示したいと思っています。ユーザーは、関係のあるコマンドが <B>fs</B> 組に属することは知っていますが、その演算子を思い出すことができません。そこでこのユーザーはキーワードとして <B>quota</B> を使用します。
<PRE>
   % <B>fs apropos quota</B>
   listquota: list volume quota
   quota: show volume quota usage
   setquota: set volume quota

</PRE>
<P>以下の例は、コマンド名または簡潔な説明の中にキーワードが組み込まれていない場合に表示されるエラー・メッセージを示しています。
<PRE>
   % <B>fs apropos "list quota"</B>
   Sorry, no commands found

</PRE>
<P><HR><B>&#91; <A HREF="#Top_Of_Page">ページのトップ</A> &#124; <A HREF="auagd022.htm">前ページ</A> &#124; <A HREF="auagd024.htm">次ページ</A> &#124; <A HREF="auagd002.htm#ToC">目次</A> &#124; <A HREF="auagd026.htm#HDRINDEX">索引</A> &#93;</B>
<!-- Begin Footer Records  ========================================== -->
<P><HR><B>
<br>(C) <A HREF="http://www.ibm.com/">IBM Corporation 2000.</A>  All Rights Reserved<!-- 991224 -->
</B>
<!-- End Footer Records  ============================================ -->
<A NAME="Bot_Of_Page"></A>
</BODY></HTML>
