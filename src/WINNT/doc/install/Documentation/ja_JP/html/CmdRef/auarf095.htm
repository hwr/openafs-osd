<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3//EN">
<HTML><HEAD>
<TITLE>管理解説書</TITLE>
<!-- Begin Header Records  ========================================== -->
<!-- C:\IDWB\TEMP\idwt1068\AUARF000.SCR converted by idb2h R4.2 (359) -->
<!-- ID Workbench Version (OS2) on 24 Dec 1999 at 21:46:04            -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Shift_JIS">
<META HTTP-EQUIV="updated" CONTENT="Fri, 24 Dec 1999 21:46:02">
<META HTTP-EQUIV="review" CONTENT="Sun, 24 Dec 2000 21:46:02">
<META HTTP-EQUIV="expires" CONTENT="Mon, 24 Dec 2001 21:46:02">
</HEAD><BODY>
<!-- (C) IBM Corporation 2000. All Rights Reserved    -->
<BODY bgcolor="ffffff">
<!-- End Header Records  ============================================ -->
<A NAME="Top_Of_Page"></A>
<H1>管理解説書</H1>
<P>
<H2><A NAME="HDRBOS_ADDKEY" HREF="auarf002.htm#ToC_109">bos addkey</A></H2>
<A NAME="IDX4456"></A>
<A NAME="IDX4457"></A>
<A NAME="IDX4458"></A>
<A NAME="IDX4459"></A>
<A NAME="IDX4460"></A>
<A NAME="IDX4461"></A>
<A NAME="IDX4462"></A>
<A NAME="IDX4463"></A>
<A NAME="IDX4464"></A>
<P><STRONG>目的</STRONG>
<P>新規のサーバー暗号化キーを <B>/usr/afs/etc/KeyFile</B> ファイルに追加します。
<P><STRONG>構文</STRONG>
<PRE><B>bos addkey -server</B> &lt;<VAR>machine name</VAR>>  [<B>-key</B> &lt;<VAR>key</VAR>>]
           <B>-kvno</B> &lt;<VAR>key version number</VAR>>  [<B>-cell</B> &lt;<VAR>cell name</VAR>>]
           [<B>-noauth</B>]  [<B>-localauth</B>]  [<B>-help</B>]

<B>bos addk -s</B> &lt;<VAR>machine name</VAR>>  [<B>-ke</B> &lt;<VAR>key</VAR>>]  <B>-kv</B> &lt;<VAR>key version number</VAR>>
         [<B>-ce</B> &lt;<VAR>cell name</VAR>>]  [<B>-n</B>]  [<B>-l</B>]  [<B>-h</B>]
</PRE>
<P><STRONG>構文</STRONG>
<P><B>bos addkey</B> コマンドは、指定された文字列からサーバー暗号化キーを構成し、<B>-kvno</B> 引き数で指定されたキー・バージョン番号をそれに割り当てて、<B>-server</B> 引き数に指定されたマシン上の <B>/usr/afs/etc/KeyFile</B> ファイルに追加します。必ず <B>kas setpassword</B> または <B>kas setkey</B> コマンドを使用して、同じキーを認証データベースの <B>afs</B> 項目に追加してください。
<P><B>-key</B> 引き数は使用しないでください。この引き数を使用すると、パスワードが画面に表示されます。この引き数を省略すると、BOS サーバーは文字列を要求しますが、入力した文字列は画面に表示されません。
<PRE>   Input key:
   Retype input key:

</PRE>
<P>BOS サーバーは、<B>/usr/afs/etc/KeyFile</B> ファイルにリストされているキー・バージョン番号の再利用を禁止しています。これにより、現行キーが新規のキーで上書きされるので、現行キーで指定されているチケットを持つユーザーは、サーバー・プロセスとの通信を妨げられることはありません。<B>/usr/afs/etc/KeyFile</B> ファイルのキー・バージョン番号を表示する場合には、<B>bos listkeys</B> コマンドを使用してください。
<P><STRONG>オプション </STRONG>
<DL>
<P><DT><B><B>-server</B>
</B><DD><B>/usr/afs/etc/KeyFile</B> ファイルを変更するサーバー・マシンを指定します。
IP アドレスまたはホスト名 (完全修飾名または省略形) によってマシンを識別します。詳細については、<B>bos</B> コマンド・セットの概要の解説ページを参照してください。
<P>
<P>米国版 AFS を実行し、更新サーバーを使って <B>/usr/afs/etc</B> ディレクトリーの内容を配布するセルでは、通常 <B>-server</B> 引き数の値としてシステム・コントロール・マシンだけを指定します。国際版 AFS を実行しているセルでは、各ファイル・サーバー・マシンに対しコマンドを繰り返し発行してください。詳細については、<B>bos</B> コマンド・セットの解説ページを参照してください。
<P><DT><B><B>-key</B>
</B><DD>パスワードなどの文字列を指定します。BOS サーバーは DES 変換機能を呼び出し、暗号化キーに適した形式にコード化します。この引き数を省略すると、BOSサーバーは文字列の入力を要求します。
<P><DT><B><B>-kvno</B>
</B><DD>新規キーのキー・バージョン番号を定義します。
<B>0</B> (ゼロ) から <B>255</B> までの範囲の整数を指定してください。操作を簡単にするために、現在最も大きいキー・バージョン番号より 1 つ大きい番号を使用してください。キー・バージョン番号を表示する場合には、<B>bos listkeys</B> コマンドを使用してください。
<A NAME="IDX4465"></A>
<P><DT><B><B>-cell</B>
</B><DD>コマンドを実行するセルを指定します。この引き数は、
<B>-localauth</B> フラグと一緒に使用してはなりません。詳細については、<B>bos</B> の解説ページを参照してください。
<P><DT><B><B>-noauth</B>
</B><DD>コマンドの発行側に非特権 ID <B>anonymous</B> を割り当てます。このフラグは <B>-localauth</B> フラグと一緒に使用してはなりません。詳細については、<B>bos</B> の解説ページを参照してください。
<P><DT><B><B>-localauth</B>
</B><DD>ローカルの <B>/usr/afs/etc/KeyFile</B> ファイルのキーを使用して、サーバー・チケットを構成します。
<B>bos</B> コマンド・インタープリターは、相互認証中に、このチケットを BOS サーバーに渡します。このフラグは、<B>-cell</B> 引き数または <B>-noauth</B> フラグと一緒に使用してはなりません。詳細については、<B>bos</B> の解説ページを参照してください。
<P><DT><B>-help
</B><DD>このコマンドのオンライン・ヘルプを出力します。これ以外の有効なオプションはすべて無視されます。
</DL>
<P><STRONG>出力</STRONG>
<P><TT>Input key</TT> および <TT>Retype input key</TT> プロンプトで入力された文字列が一致しない場合は、以下のメッセージが表示され、コマンドは新規キーを追加せずに終了します。
<PRE>   「入力キーが一致しませんでした (Input key mismatch)」

</PRE>
<P><STRONG>例</STRONG>
<P>次のコマンドは、キー・バージョン番号が 14 の新しいサーバー暗号化キーを、マシン <B>fs1.example.com</B> (システム・コントロール・マシン) 上の <B>KeyFile</B> ファイルに追加しています。このコマンドでは推奨通り、<B>-key</B> 引き数が省略されているので、プロンプトが表示されます。このプロンプトでパスワードを入力します。
<PRE>   % <B>bos addkey -server fs1.example.com -kvno 14</B>
   Input key:
   Retype input key:

</PRE>
<P><STRONG>必要となる特権</STRONG>
<P>コマンドの発行側は、<B>-server</B> 引き数で指定されたマシンの <B>/usr/afs/etc/UserList</B> ファイルにリストされているか、または <B>-localauth</B> フラグが使用されている場合は、ローカル・スーパーユーザー <B>root</B> としてサーバー・マシンにログオンしている必要があります。
<P><STRONG>関連情報 </STRONG>
<P><A HREF="auarf023.htm#HDRKEYFILE">KeyFile</A>
<P><A HREF="auarf035.htm#HDRUSERLIST">UserList</A>
<P><A HREF="auarf093.htm#HDRBOS_INTRO">bos</A>
<P><A HREF="auarf107.htm#HDRBOS_LISTKEYS">bos listkeys</A>
<P><A HREF="auarf111.htm#HDRBOS_REMOVEKEY">bos removekey</A>
<P>
<P><HR><B>&#91; <A HREF="#Top_Of_Page">ページのトップ</A> &#124; <A HREF="auarf094.htm">前ページ</A> &#124; <A HREF="auarf096.htm">次ページ</A> &#124; <A HREF="auarf002.htm#ToC">目次</A> &#124; <A HREF="auarf284.htm#HDRINDEX">索引</A> &#93;</B>
<!-- Begin Footer Records  ========================================== -->
<P><HR><B>
<br>(C) <A HREF="http://www.ibm.com/">IBM Corporation 2000.</A>  All Rights Reserved
</B>
<!-- End Footer Records  ============================================ -->
<A NAME="Bot_Of_Page"></A>
</BODY></HTML>
