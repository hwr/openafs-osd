<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3//EN">
<HTML><HEAD>
<TITLE>管理解説書</TITLE>
<!-- Begin Header Records  ========================================== -->
<!-- C:\IDWB\TEMP\idwt1068\AUARF000.SCR converted by idb2h R4.2 (359) -->
<!-- ID Workbench Version (OS2) on 24 Dec 1999 at 21:46:04            -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Shift_JIS">
<META HTTP-EQUIV="updated" CONTENT="Fri, 24 Dec 1999 21:46:02">
<META HTTP-EQUIV="review" CONTENT="Sun, 24 Dec 2000 21:46:02">
<META HTTP-EQUIV="expires" CONTENT="Mon, 24 Dec 2001 21:46:02">
</HEAD><BODY>
<!-- (C) IBM Corporation 2000. All Rights Reserved    -->
<BODY bgcolor="ffffff">
<!-- End Header Records  ============================================ -->
<A NAME="Top_Of_Page"></A>
<H1>管理解説書</H1>
<P>
<H2><A NAME="HDRBOS_INTRO" HREF="auarf002.htm#ToC_107">bos</A></H2>
<A NAME="IDX4435"></A>
<A NAME="IDX4436"></A>
<A NAME="IDX4437"></A>
<A NAME="IDX4438"></A>
<A NAME="IDX4439"></A>
<A NAME="IDX4440"></A>
<A NAME="IDX4441"></A>
<P><STRONG>目的</STRONG>
<P><B>bos</B> コマンド・セットの概要
<P><STRONG>構文</STRONG>
<P><B>bos</B> コマンド・セットのコマンドは、基本 OverSeer (BOS) サーバー (すべてのファイル・サーバー・マシンで実行され、そのマシン上の他のサーバー・プロセスをモニターします) との管理インターフェースです。プロセスに障害が起こると、BOS サーバー は他のプロセスとの依存性を考慮して、自動的に再始動します。BOS サーバーを使用すると、システム管理者はサーバー・マシンやプロセス状況を常にモニターする必要がなくなります。
<P><B>bos</B> コマンド・セットは、次のカテゴリーに分類できます。
<UL>
<LI>サーバー・プロセスのバイナリー・ファイルを管理するコマンド:
<B>bos getdate</B>、
<B>bos install</B>、
<B>bos prune</B>、および
<B>bos uninstall</B>
</LI><LI>システム構成ファイルを保守するコマンド:
<B>bos addhost</B>、
<B>bos addkey</B>、
<B>bos adduser</B>、
<B>bos listhosts</B>、
<B>bos listkeys</B>、
<B>bos listusers</B>、
<B>bos removehost</B>、
<B>bos removekey</B>、
<B>bos removeuser</B>、および
<B>bos setcellname</B>
</LI><LI>プロセスを開始および停止するコマンド:
<B>bos create</B>、
<B>bos delete</B>、
<B>bos restart</B>、
<B>bos shutdown</B>、
<B>bos start</B>、
<B>bos startup</B>、および <B>bos stop</B>
</LI><LI>サーバー・プロセスおよびサーバー・マシン状況を設定し、検証するコマンド:
<B>bos getlog</B>、
<B>bos getrestart</B>、
<B>bos setauth</B>、
<B>bos setrestart</B>、および
<B>bos status</B>
</LI><LI>ファイル・システムの整合性を復元するコマンド: <B>bos salvage</B>
</LI><LI>ヘルプを表示するコマンド: <B>bos apropos</B> および <B>bos help</B>
</LI></UL>
<P>BOS サーバーおよび <B>bos</B> コマンドは、次の構成ファイルおよびログ・ファイルを使用および保守します。
<UL>
<LI><B>/usr/afs/etc/CellServDB</B> ファイル。ローカル・セルのデータベース・サーバー・マシンをリストします。これらのマシンは、認証、バックアップ、保護 および ボリューム・ロケーション (VL) サーバー・プロセスを実行し、管理情報のデータベースを保守します。データベース・サーバー・プロセスは、ファイルを参照して対等機能を調べますが、他のサーバー・プロセスは、そのファイルを参照して、必要な場合にデータベース情報にアクセスする場所を調べます。<B>CellServDB</B> ファイルを管理する場合には、次のコマンドを使用してください。
<B>bos addhost</B>、
<B>bos listhosts</B>、
<B>bos removehost</B> および
<B>bos setcellname</B>
</LI><LI><B>/usr/afs/etc/KeyFile</B> ファイル。サーバー・プロセスが、クライアント・プロセスとやり取りをするチケットの解読に使用するサーバーの暗号化キーをリストします。
<B>KeyFile</B> ファイルを管理する場合には、次のコマンドを使用してください。<B>bos addkey</B>、<B>bos listkeys</B> および <B>bos removekey</B>
</LI><LI><B>/usr/afs/etc/ThisCell</B> ファイル。サーバー間通信を行うために、サーバー・マシンが所属するセルを定義します。これを管理する場合には、<B>bos setcellname</B> コマンドを使用します。また、AFS コマンド・セットとキャッシュ・マネージャーによる AFS データへのアクセスに関していえば、マシンのセル・メンバーシップを定義している <B>/usr/vice/etc/ThisCell</B> ファイルもあります。
</LI><LI><B>/usr/afs/etc/UserList</B> ファイル。特権 <B>bos</B> および <B>vos</B>コマンドを発行する権限のある管理者のユーザー名をリストします。
<B>UserList</B> ファイルを管理する場合には、次のコマンドを使用してください。<B>bos adduser</B>、<B>bos listusers</B> および <B>bos removeuser</B>
</LI><LI><B>/usr/afs/local/BosConfig</B> ファイルは、どの AFS サーバー・プロセスがサーバー・マシン上で実行するかということと、
AFS サーバー・プロセスが失敗した場合に、BOS サーバーがそれらを自動的に再始動するかどうかを定義します。また、すべてのプロセスが自動的に再起動する時間 (デフォルトでは週に 1 度)、および BOS サーバーが、新規のバイナリー・ファイルを持つプロセスを再起動する時間 (デフォルトでは 1 日に１度) を定義します。
<B>BosConfig</B> ファイルを管理する場合には、次のコマンドを使用してください。
<B>bos create</B>、
<B>bos delete</B>、
<B>bos getrestart</B>、
<B>bos setrestart</B>,
<B>bos start</B>、および
<B>bos stop</B>
</LI><LI><B>/usr/afs/log/BosLog</B> ファイル。BOS サーバー が実行する重要な操作と検出したエラー状況を記録します。
</LI></UL>
<P>詳細については、各ファイルの解説ページを参照してください。
<P><STRONG>オプション </STRONG>
<P><B>bos</B> セットの多くのコマンドでは、以下の引き数およびフラグを使用することができます。各コマンドの解説ページにも説明はありますが、ここでは詳しく説明します。
<A NAME="IDX4442"></A>
<A NAME="IDX4443"></A>
<A NAME="IDX4444"></A>
<DL>
<P><DT><B>-cell &lt;<VAR>cell name</VAR>>
</B><DD>コマンドを実行するセルの名前を示します。ローカル・マシン上の <B>/usr/vice/etc/CellServDB</B> ファイルにある他の項目と区別できる場合には、セル名の省略形を使用することができます。
<B>-cell</B> 引き数が省略されると、コマンド・インタープリターは、次の内容を順に読み込み、ローカル・セルの名前を判別します。
<P>
<OL TYPE=1>
<LI>AFSCELL 環境変数値
</LI><LI>ローカル <B>/usr/vice/etc/ThisCell</B> ファイル
</LI></OL>
<P>
<P>
<P><B>-cell</B> と <B>-localauth</B> オプションは一緒に使用しないでください。
<B>-localauth</B> フラグを指定したコマンドは、
(サーバー・マシンのローカル <B>/usr/afs/etc/ThisCell</B> ファイルで定義されているように) ローカル・セル内で実行されますが、
<B>-cell</B> 引き数を指定したコマンドは、指定した外部セルで実行されます。
<A NAME="IDX4445"></A>
<P><DT><B>-help
</B><DD>標準出力ストリームにコマンドのオンライン・ヘルプ・メッセージを出力します。このフラグは、コマンドの他のオプションと一緒に使用してはなりません。このフラグを使用すると、コマンド・インタープリターは、他のすべての引き数およびフラグを無視し、ヘルプ・メッセージの出力だけを行います。
<P><DT><B>
<A NAME="IDX4446"></A>
<B>-localauth</B>
</B><DD>ローカルの <B>/usr/afs/etc/KeyFile</B> ファイルの中で最も高いキー・バージョン番号を持つサーバー暗号化キーを使用して、サーバー・チケットを構成します。<B>bos</B> コマンド・インタープリターは、相互認証時に、有効期限が切れることのないチケットを BOS サーバーに渡します。
<P>
<P>このフラグは、サーバー・マシンにコマンドを出す場合にのみ使用します。クライアント・マシンには、通常 <B>/usr/afs/etc/KeyFile</B> ファイルがありません。このフラグを使用するコマンドの発行者は、サーバー・マシンにローカル・スーパーユーザー <B>root</B> としてログオンしている必要があります。このフラグは、UNIX <B>cron</B> ユーティリティー、またはマシンの <B>/usr/afs/local/BosConfig</B> ファイル内の cron 項目によって制御されたプロセスなどの、非在席アプリケーション・プログラムによって呼び出されたコマンドの場合に役立ちます。また、管理者が ローカル・スーパーユーザー <B>root</B>
としてログインしても AFS に認証されない場合にも有効です。
<P>
<P><B>-cell</B> と <B>-localauth</B> オプションは一緒に使用しないでください。
<B>-localauth</B> フラグを指定したコマンドは、
(サーバー・マシンのローカル <B>/usr/afs/etc/ThisCell</B> ファイルで定義されているように) ローカル・セル内で実行されますが、
<B>-cell</B> 引き数を指定したコマンドは、指定した外部セルで実行されます。また、<B>-localauth</B> と <B>-noauth</B> フラグを組み合わせてはなりません。
<P><DT><B>
<A NAME="IDX4447"></A>
<B>-noauth</B>
</B><DD>BOS サーバーが、コマンドの発行側を非特権ユーザー <B>anonymous</B> として扱い、認証されていない認証サーバーへの接続を確立します。これは、サーバー・マシン上で許可検査が使用不可の場合にのみ有効です。(たとえば、ファイル・サーバー・マシンのインストール時や、通常でない状況で <B>bos setauth</B> コマンドを使用した場合など。) 通常の環境では、BOS サーバーは、特権ユーザーだけにサーバーまたは構成ファイル状況の変更コマンドの発行を許可します。<B>-noauth</B> フラグが指定されていても、このようなアクションは実行できません。<B> -noauth</B> は、<B>-localauth</B> フラグと一緒に使用してはなりません。
<P><DT><B><B>-server</B> &lt;<VAR>machine name</VAR>>
<A NAME="IDX4448"></A>
</B><DD>コマンドを実行する AFS サーバー・マシンを指定します。ドット付き 10 進数形式の IP アドレス、その完全修飾されたホスト名 (たとえば <B>fs1.example.com</B>)、あるいは他のマシンと区別することができる場合には、省略形式のホスト名を使用してマシンを識別します。省略形式が使用できるかどうかは、このコマンドを発行した時点でのネーム・サービス (たとえば、ドメイン・ネーム・サービス、ローカル・ホスト表) 使用できるかどうかによって異なります。
<P>
<P>セルにあるすべてのサーバー・マシンで共有する管理ファイルを更新するコマンド (<B>bos addhost</B>、<B>bos addkey</B>、<B>bos adduser</B>、<B>bos removehost</B>、<B>bos removekey</B>、および <B>bos removeuser</B> コマンド) に適切なマシンは、セルが使用する AFS が米国版か、あるいは国際版かで異なります。
<UL>
<LI>セルが米国版 AFS を実行し、推奨通りに更新サーバーを使用して、<B>/usr/afs/etc</B> ディレクトリーの内容を配布する場合には、システム・コントロール・マシン名を指定してください。コマンドの発行後 5 分以内に、更新サーバーは、セル内の他の AFS サーバー・マシンに変更されたファイルを配布します。指定されたマシンがシステム・コントロール・マシンではなく、システム・コントロール・マシンを参照する <B> upclientetc</B> プロセスを実行している場合には、プロセスが次にシステム・コントロール・マシンの関連ファイルを読み出すときに、変更が上書きされます。
</LI><LI>セルが国際版 AFS を実行している場合には、更新サーバーを使用して <B>/usr/afs/etc</B> ディレクトリーの内容を配布しないでください。セルのサーバー・マシンを 1 つずつ指定して、このコマンドを繰り返し発行してください。起こりうる不整合の問題を避けるには、短時間内にコマンド発行を終了します。
</LI></UL>
</DL>
<P><STRONG>必要となる特権</STRONG>
<A NAME="IDX4449"></A>
<A NAME="IDX4450"></A>
<P>構成ファイルを変更したり、プロセス状況を更新する <B>bos</B> コマンドを発行する場合には、コマンドの発行側は、<B>-server</B> 引き数で指定されたサーバー・マシン上の <B>/usr/afs/etc/UserList</B> ファイルにリストされていなければなりません。あるいは、<B>-localauth</B> フラグが指定されている場合には、コマンドの発行側はローカルのスーパーユーザー <B>root</B> としてログオンしていなければなりません。
<P>情報を表示するだけの <B>bos</B> コマンド (<B>bos listkeys</B> コマンドを除く) には、特権は不要です。
<P><STRONG>関連情報 </STRONG>
<P><A HREF="auarf016.htm#HDRBOSCONFIG">BosConfig</A>
<P><A HREF="auarf019.htm#HDRCLI_CSDB">CellServDB (クライアント・バージョン)</A>
<P><A HREF="auarf020.htm#HDRSV_CSDB">CellServDB (サーバー・バージョン)</A>
<P><A HREF="auarf023.htm#HDRKEYFILE">KeyFile</A>
<P><A HREF="auarf032.htm#HDRCLI_THISCELL">ThisCell (クライアント・バージョン)</A>
<P><A HREF="auarf033.htm#HDRSV_THISCELL">ThisCell (サーバー・バージョン)</A>
<P><A HREF="auarf035.htm#HDRUSERLIST">UserList</A>
<P><A HREF="auarf094.htm#HDRBOS_ADDHOST">bos addhost</A>
<P><A HREF="auarf095.htm#HDRBOS_ADDKEY">bos addkey</A>
<P><A HREF="auarf096.htm#HDRBOS_ADDUSER">bos adduser</A>
<P><A HREF="auarf097.htm#HDRBOS_APROPOS">bos apropos</A>
<P><A HREF="auarf098.htm#HDRBOS_CREATE">bos create</A>
<P><A HREF="auarf099.htm#HDRBOS_DELETE">bos delete</A>
<P><A HREF="auarf100.htm#HDRBOS_EXEC">bos exec</A>
<P><A HREF="auarf101.htm#HDRBOS_GETDATE">bos getdate</A>
<P><A HREF="auarf102.htm#HDRBOS_GETLOG">bos getlog</A>
<P><A HREF="auarf103.htm#HDRBOS_GETRESTART">bos getrestart</A>
<P><A HREF="auarf104.htm#HDRBOS_HELP">bos help</A>
<P><A HREF="auarf105.htm#HDRBOS_INSTALL">bos install</A>
<P><A HREF="auarf106.htm#HDRBOS_LISTHOSTS">bos listhosts</A>
<P><A HREF="auarf107.htm#HDRBOS_LISTKEYS">bos listkeys</A>
<P><A HREF="auarf108.htm#HDRBOS_LISTUSERS">bos listusers</A>
<P><A HREF="auarf109.htm#HDRBOS_PRUNE">bos prune</A>
<P><A HREF="auarf110.htm#HDRBOS_REMOVEHOST">bos removehost</A>
<P><A HREF="auarf111.htm#HDRBOS_REMOVEKEY">bos removekey</A>
<P><A HREF="auarf112.htm#HDRBOS_REMOVEUSER">bos removeuser</A>
<P><A HREF="auarf113.htm#HDRBOS_RESTART">bos restart</A>
<P><A HREF="auarf114.htm#HDRBOS_SALVAGE">bos salvage</A>
<P><A HREF="auarf115.htm#HDRBOS_SETAUTH">bos setauth</A>
<P><A HREF="auarf116.htm#HDRBOS_SETCELLNAME">bos setcellname</A>
<P><A HREF="auarf117.htm#HDRBOS_SETRESTART">bos setrestart</A>
<P><A HREF="auarf118.htm#HDRBOS_SHUTDOWN">bos shutdown</A>
<P><A HREF="auarf119.htm#HDRBOS_START">bos start</A>
<P><A HREF="auarf120.htm#HDRBOS_STARTUP">bos startup</A>
<P><A HREF="auarf121.htm#HDRBOS_STATUS">bos status</A>
<P><A HREF="auarf122.htm#HDRBOS_STOP">bos stop</A>
<P><A HREF="auarf123.htm#HDRBOS_UNINSTALL">bos uninstall</A>
<P>
<P><HR><B>&#91; <A HREF="#Top_Of_Page">ページのトップ</A> &#124; <A HREF="auarf092.htm">前ページ</A> &#124; <A HREF="auarf094.htm">次ページ</A> &#124; <A HREF="auarf002.htm#ToC">目次</A> &#124; <A HREF="auarf284.htm#HDRINDEX">索引</A> &#93;</B>
<!-- Begin Footer Records  ========================================== -->
<P><HR><B>
<br>(C) <A HREF="http://www.ibm.com/">IBM Corporation 2000.</A>  All Rights Reserved
</B>
<!-- End Footer Records  ============================================ -->
<A NAME="Bot_Of_Page"></A>
</BODY></HTML>
