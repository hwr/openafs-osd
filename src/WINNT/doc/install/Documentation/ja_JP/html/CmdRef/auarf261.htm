<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3//EN">
<HTML><HEAD>
<TITLE>管理解説書</TITLE>
<!-- Begin Header Records  ========================================== -->
<!-- C:\IDWB\TEMP\idwt1068\AUARF000.SCR converted by idb2h R4.2 (359) -->
<!-- ID Workbench Version (OS2) on 24 Dec 1999 at 21:46:04            -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Shift_JIS">
<META HTTP-EQUIV="updated" CONTENT="Fri, 24 Dec 1999 21:46:02">
<META HTTP-EQUIV="review" CONTENT="Sun, 24 Dec 2000 21:46:02">
<META HTTP-EQUIV="expires" CONTENT="Mon, 24 Dec 2001 21:46:02">
</HEAD><BODY>
<!-- (C) IBM Corporation 2000. All Rights Reserved    -->
<BODY bgcolor="ffffff">
<!-- End Header Records  ============================================ -->
<A NAME="Top_Of_Page"></A>
<H1>管理解説書</H1>
<P>
<H2><A NAME="HDRVOS_EXAMINE" HREF="auarf002.htm#ToC_275">vos examine</A></H2>
<A NAME="IDX5653"></A>
<A NAME="IDX5654"></A>
<A NAME="IDX5655"></A>
<A NAME="IDX5656"></A>
<A NAME="IDX5657"></A>
<A NAME="IDX5658"></A>
<A NAME="IDX5659"></A>
<A NAME="IDX5660"></A>
<A NAME="IDX5661"></A>
<A NAME="IDX5662"></A>
<A NAME="IDX5663"></A>
<P><STRONG>目的</STRONG>
<P>ボリュームのボリューム・ヘッダーおよび VLDB 項目の情報を表示します。
<P><STRONG>構文</STRONG>
<PRE><B>vos examine -id</B> &lt;<VAR>volume name or ID</VAR>>  [<B>-extended</B>]  [<B>-cell</B> &lt;<VAR>cell name</VAR>>]
            [<B>-noauth</B>]  [<B>-localauth</B>]  [<B>-verbose</B>]  [<B>-help</B>]

<B>vos e -i</B> &lt;<VAR>volume name or ID</VAR>>  [<B>-e</B>]  [<B>-c</B> &lt;<VAR>cell name</VAR>>]  [<B>-n</B>]  [<B>-l</B>]  [<B>-v</B>]  [<B>-h</B>]

<B>vos volinfo -i</B> &lt;<VAR>volume name or ID</VAR>>  [<B>-e</B>]  [<B>-c</B> &lt;<VAR>cell name</VAR>>]
            [<B>-n</B>]  [<B>-l</B>]  [<B>-v</B>]  [<B>-h</B>]

<B>vos v -i</B> &lt;<VAR>volume name or ID</VAR>>  [<B>-e</B>]  [<B>-c</B> &lt;<VAR>cell name</VAR>>]  [<B>-n</B>]  [<B>-l</B>]  [<B>-v</B>]  [<B>-h</B>]

</PRE>
<P><STRONG>構文</STRONG>
<P><B>vos examine</B> コマンドは、
<B>-id</B> 引き数に指定されたボリュームのボリューム・ロケーション・データベース (VLDB) 項目およびボリューム・ヘッダーを書式設定して表示します。
<P>ボリューム・ヘッダーだけを表示する場合には、<B>vos listvol</B> コマンドを使用してください。VLDB 項目だけを使用する場合には、<B> vos listvldb</B> コマンドを使用してください。
<P><STRONG>オプション </STRONG>
<DL>
<P><DT><B>-id
</B><DD>読み取り / 書き込み、読み取り専用、またはバックアップであるボリュームの完全名またはボリューム ID 番号のいずれかを指定します。
<P><DT><B>-extended
</B><DD>ボリューム内のファイルおよびディレクトリーについての読み取りおよび書き込み操作に関する統計を表示します。
<P><DT><B>-cell
</B><DD>コマンドを実行するセルを指定します。この引き数は、
<B>-localauth</B> フラグと一緒に使用してはなりません。詳細については、<B>vos</B> の解説ページを参照してください。
<P><DT><B>-noauth
</B><DD>コマンドの発行側に非特権 ID <B>anonymous</B> を割り当てます。このフラグは <B>-localauth</B> フラグと一緒に使用してはなりません。詳細については、<B>vos</B> の解説ページを参照してください。
<P><DT><B>-localauth
</B><DD>ローカルの <B>/usr/afs/etc/KeyFile</B> ファイルのキーを使用して、サーバー・チケットを構成します。相互認証の間、<B>vos</B> コマンド・インタープリターは、ボリューム・サーバーおよびボリューム・ロケーション・サーバーに、このチケットを提供します。このフラグは、<B>-cell</B> 引き数、または <B>-noauth</B> フラグと一緒に使用してはなりません。詳細については、<B>vos</B> の解説ページを参照してください。
<P><DT><B>-verbose
</B><DD>標準出力ストリームに、コマンド実行の詳細なトレースを出力します。この引き数を省略すると、警告およびエラー・メッセージだけが表示されます。
<P><DT><B>-help
</B><DD>このコマンドのオンライン・ヘルプを出力します。これ以外の有効なオプションはすべて無視されます。
</DL>
<P><STRONG>出力</STRONG>
<P>出力の最初の 7 行にはボリューム・ヘッダーの情報が、残りの行には VLDB の情報が表示されます。次のリストの各項目は、ボリューム・ヘッダーから派生した出力の行に対応します。
<UL>
<LI>指定されたボリュームの基本情報 (単一行に表示) は以下のとおりです。
<UL>
<LI>名前
</LI><LI>ボリューム ID 番号
<A NAME="IDX5664"></A>
</LI><LI>タイプ (このフラグは、読み取り / 書き込みの場合は <TT>RW</TT>、読み取り専用の場合は <TT>RO</TT>、バックアップの場合は <TT>BK</TT>)
</LI><LI>サイズ (KB 単位) (<TT>1024</TT> はメガバイトと等しい)
</LI><LI><B>-extended</B> フラグが指定されている場合は、ボリューム内のファイル数
<A NAME="IDX5665"></A>
</LI><LI>ファイル・サーバー・マシン上の状況。これは以下のいずれかです。
<P>
<DL>
<A NAME="IDX5666"></A>
<P><DT><B><TT>On-line</TT>
</B><DD>キャッシュ・マネージャーは、このボリュームに完全にアクセス可能です。
<A NAME="IDX5667"></A>
<P><DT><B><TT>Off-line</TT>
</B><DD>キャッシュ・マネージャーは、このボリュームにアクセスできませんが、ボリュームは破壊されていないようです。この状況は、たとえば、ボリュームのダンプ処理中に現れます。
<A NAME="IDX5668"></A>
<P><DT><B><TT>Off-line**needs salvage**</TT>
</B><DD>キャッシュ・マネージャーは、このボリュームにアクセスできません。ボリュームは破壊されているようです。
<B>bos salvage</B> または <B>salvager</B> コマンドを使用して、破壊を修復します。
</DL>
</LI></UL>
</LI><LI>VLDB またはボリューム・ヘッダーから派生するのではなく、コマンド実行と同様にコマンド・インタープリターにより判別される、ボリュームを含むファイル・サーバー・マシンおよび区画。
<A NAME="IDX5669"></A>
<A NAME="IDX5670"></A>
<A NAME="IDX5671"></A>
<A NAME="IDX5672"></A>
<A NAME="IDX5673"></A>
<A NAME="IDX5674"></A>
<A NAME="IDX5675"></A>
<A NAME="IDX5676"></A>
</LI><LI>以下の各種バージョンのボリュームに関連するボリューム ID 番号。読み取り / 書き込み (<TT>RWrite</TT>)、読み取り専用 (<TT>ROnly</TT>)、バックアップ (<TT>Backup</TT>)、および ReleaseClone (<TT>RClone</TT>)。これらのボリューム ID のいずれかが、ボリュームの出力の第 1 行に表示されるボリューム ID 番号と一致します。
<TT>RWrite</TT>、<TT>ROnly</TT>、または <TT>Backup</TT> フィールドが <TT>0</TT> (ゼロ) である場合、該当するタイプのボリュームはありません。現在、ReleaseClone がない場合は、<TT>RClone</TT> フィールドは全く表示されません。
<A NAME="IDX5677"></A>
<A NAME="IDX5678"></A>
</LI><LI>ボリュームの読み取り / 書き込みコピーに割り当てられた最大割り当て量は、<TT>MaxQuota</TT> フィールドに KB ブロック単位で表示されます。
<A NAME="IDX5679"></A>
<A NAME="IDX5680"></A>
</LI><LI><TT>Creation</TT> フィールドのボリュームが作成された日時。ボリュームが <B>backup diskrestore</B>、
<B>backup volrestore</B>、<B>vos restore</B> コマンドで復元されていると、これは復元時刻を表します。
<A NAME="IDX5681"></A>
<A NAME="IDX5682"></A>
</LI><LI><TT>Last Update</TT> フィールドのボリュームの内容が最後に変更された日時。読み取り専用およびバックアップ・ボリュームの場合、
<TT>Creation</TT> フィールドのタイム・スタンプと一致します。
<A NAME="IDX5683"></A>
<A NAME="IDX5684"></A>
</LI><LI>次の 2 つの時刻のうち遅い時刻以降の、取り出しまたは保管操作の場合のボリュームに対するアクセス回数です。
<UL>
<LI>コマンドが発行された日の 午前 12 時 00 分
</LI><LI>ボリュームのロケーションが最後に変更された時刻
</LI></UL>
</LI></UL>
<P><B>-extended</B> フラグを組み込むと、次の 2 つの表が表示されます。
<UL>
<LI><TT>Raw Read/Write Stats</TT> 表には、指定されたボリュームに対する読み取り (フェッチ) 回数および書き込み (格納) 回数が表示されます。
</LI><LI><TT>Writes Affecting Authorship</TT> 表には、指定されたボリュームにあるファイルおよびディレクトリーに対する書き込み操作についての情報が表示されます。
</LI></UL>
<P>次のメッセージが、既にリストされている情報の代わりに表示される場合、クローンが作成されているなどのため、キャッシュ・マネージャーまたは <B>vos</B> コマンド・インタープリターがボリュームにアクセスできないことを示します。
<PRE>   **** ボリューム <VAR>volume_ID</VAR> は使用中です ****
</PRE>
<P>次のメッセージが、既にリストされている情報の代わりに表示される場合、ファイル・サーバーがボリュームに接続できないことを示します。ボリュームがひどく破壊されている可能性があるためです。ファイル・サーバー・マシンの <B>/usr/afs/logs</B> ディレクトリーの <B>FileLog</B> および <B>VolserLog</B> ログ・ファイルは、可能な限り追加情報を提供します。この追加情報を表示するには、<B>bos getlog</B> コマンドを使用します。
<PRE>   **** ボリューム <VAR>volume_ID</VAR> に接続できませんでした ****
</PRE>
<P>ブランク行の後に、VLDB 項目の情報が表示されます。このリストの各項目は、出力の別の行と対応します。
<UL>
<LI>基本 (読み取り / 書き込み) ボリューム名。読み取り専用およびバックアップ・バージョンの名前は同じで、拡張子は、それぞれ <B>.readonly</B> と <B>.backup</B> です。
</LI><LI>ボリューム ID 番号は、実際に存在するボリュームのバージョンに割り当てられます。読み取り / 書き込みの場合は <TT>RWrite</TT>、読み取り専用の場合は <TT>ROnly</TT>、バックアップの場合は <TT>Backup</TT>、
ReleaseClone の場合は <TT>RClone</TT> というフィールドに設定されます。
(フィールドが表示されない場合、対応するバージョンのボリュームは存在しません。)
通常、<TT>RClone</TT> フィールドが現れると、解放操作が正常終了しなかったことを示します。
<TT>Old release</TT> および <TT>New release</TT> フラグは、すぐ後で説明するサイト定義行の 1 行または複数行に表示される場合もよくあります。
<A NAME="IDX5685"></A>
<A NAME="IDX5686"></A>
</LI><LI>ボリュームの読み取り / 書き込みコピーまたは読み取り専用コピーを含むサイト数。文字列 <TT>サイト数 -></TT> の後に続きます。
<A NAME="IDX5687"></A>
<A NAME="IDX5688"></A>
<A NAME="IDX5689"></A>
<A NAME="IDX5690"></A>
<A NAME="IDX5691"></A>
</LI><LI>ボリュームの読み取り / 書き込みコピーまたは読み取り専用コピーを含む各サイトの 1 行。ファイル・サーバー・マシン、区画、およびボリュームのタイプ (読み取り / 書き込みの場合は <TT>RW</TT>、読み取り専用の場合は、<TT>RO</TT>) を指定します。バックアップ・バージョンが存在する場合、読み取り / 書き込みサイトを共用することができます。複数のフラグが、以下のサイト定義と一緒に表示できます。
<P>
<DL>
<A NAME="IDX5692"></A>
<P><DT><B><TT>Not released</TT>
</B><DD><B>vos addsite</B> コマンドを使用して、読み取り専用サイトを定義して以来、
<B>vos release</B> コマンドが発行されていないことを示します。
<A NAME="IDX5693"></A>
<P><DT><B><TT>Old release</TT>
</B><DD><B>vos release</B> コマンドが正常終了せず、このサイトに以前の廃止されたバージョンのボリュームが残っていることを示します。
<A NAME="IDX5694"></A>
<P><DT><B><TT>New release</TT>
</B><DD><B>vos release</B> コマンドは正常終了しませんでしたが、このサイトは適切な新規バージョンのボリュームを受け取ったことを示します。
</DL>
</LI><LI>VLDB 項目がロックされている場合は、文字列<TT>ボリュームは現在ロックされています</TT>となります。
</LI></UL>
<P><TT>New release</TT> および <TT>Old release</TT> フラグの詳細な説明については、
<B>vos release</B> コマンドの解説ページを参照してください。
<P><STRONG>例</STRONG>
<P>次の例は、
2 つの 読み取り専用の複写サイトを持つ <B>usr</B> という名前の Example Corporation ボリュームの出力を示しています。(このボリュームは、
<B>/afs/example.com/usr</B> ディレクトリーにマウントされています。)
説明を簡単にするために、この出力では、ボリュームがロックされている状態になっています。
<PRE>   % <B>vos examine usr</B>
   usr                           536870981 RW   3459 K On-line
        fs2.example.com /vicepb
        RWrite 5360870981   ROnly 536870982   Backup 536870983
        MaxQuota      40000 K
        Creation    Mon Jun 12 15:22:06 1989
        Last Update Fri Jun 16 09:34:35 1989
        5719 accesses in the past day (i.e., vnode references)
        RWrite: 5360870981   ROnly: 536870982   Backup: 536870983
        number of sites -> 3
           server fs1.example.com partition /vicepa RO Site
           server fs3.example.com partition /vicepa RO Site
           server fs2.example.com partition /vicepb RW Site
        Volume is currently LOCKED

</PRE>
<P>次の例は、<B>-extended</B> フラグを使用した場合のボリューム <B>user.terry</B> の出力を示しています。このボリュームには、読み取り専用の複写サイトはありません。
<PRE>   %<B> vos examine -id user.terry -extended</B>
   user.terry         354287190 RW    2302 K used 119 files On-line
       fs4.example.com /vicepc
       RWrite 354287190 ROnly          0 Backup 354287192
       MaxQuota       5000 K
       Creation    Wed Nov 25 17:38:57 1992
       Last Update Tue Dec 15 10:46:20 1992
       598 accesses in the past day (i.e., vnode references)
                      Raw Read/Write Stats
             |-------------------------------------------|
             |    Same Network     |    Diff Network     |
             |----------|----------|----------|----------|
             |  Total   |   Auth   |   Total  |   Auth   |
             |----------|----------|----------|----------|
   Reads     |       55 |       55 |       38 |       38 |
   Writes    |       95 |       95 |        0 |        0 |
             |-------------------------------------------|
                   Writes Affecting Authorship
             |-------------------------------------------|
             |   File Authorship   | Directory Authorship|
             |----------|----------|----------|----------|
             |   Same   |   Diff   |    Same  |   Diff   |
             |----------|----------|----------|----------|
   0-60 sec  |       38 |        0 |       21 |        1 |
   1-10 min  |        2 |        0 |        7 |        0 |
   10min-1hr |        0 |        0 |        1 |        0 |
   1hr-1day  |        1 |        0 |        5 |        1 |
   1day-1wk  |        0 |        0 |        0 |        0 |
   > 1wk     |        0 |        0 |        0 |        0 |
             |-------------------------------------------|
    RWrite: 354287190    Backup: 354287192
    number of sites -> 1
       server fs4.example.com partition /vicepc RW Site

</PRE>
<P><STRONG>必要となる特権</STRONG>
<P>なし。
<P><STRONG>関連情報 </STRONG>
<P><A HREF="auarf072.htm#HDRBK_DISKRESTORE">backup diskrestore</A>
<P><A HREF="auarf091.htm#HDRBK_VOLRESTORE">backup volrestore</A>
<P><A HREF="auarf102.htm#HDRBOS_GETLOG">bos getlog</A>
<P><A HREF="auarf114.htm#HDRBOS_SALVAGE">bos salvage</A>
<P><A HREF="auarf232.htm#HDRSALVAGER">salvager</A>
<P><A HREF="auarf252.htm#HDRVOS_INTRO">vos</A>
<P><A HREF="auarf266.htm#HDRVOS_LISTVOL">vos listvol</A>
<P><A HREF="auarf265.htm#HDRVOS_LISTVLDB">vos listvldb</A>
<P><A HREF="auarf270.htm#HDRVOS_RELEASE">vos release</A>
<P><A HREF="auarf274.htm#HDRVOS_RESTORE">vos restore</A>
<P>
<P><HR><B>&#91; <A HREF="#Top_Of_Page">ページのトップ</A> &#124; <A HREF="auarf260.htm">前ページ</A> &#124; <A HREF="auarf262.htm">次ページ</A> &#124; <A HREF="auarf002.htm#ToC">目次</A> &#124; <A HREF="auarf284.htm#HDRINDEX">索引</A> &#93;</B>
<!-- Begin Footer Records  ========================================== -->
<P><HR><B>
<br>(C) <A HREF="http://www.ibm.com/">IBM Corporation 2000.</A>  All Rights Reserved
</B>
<!-- End Footer Records  ============================================ -->
<A NAME="Bot_Of_Page"></A>
</BODY></HTML>
